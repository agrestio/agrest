<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <title xmlns:d="http://docbook.org/ns/docbook">Chapter&nbsp;8.&nbsp;Control Parameters</title><link rel="stylesheet" type="text/css" href="css/doc.css"><meta xmlns:d="http://docbook.org/ns/docbook" name="keywords" content="LinkRest 1 documentation"><meta xmlns:d="http://docbook.org/ns/docbook" name="description" content="User documentation for LinkRest version 1"><link rel="home" href="index.html" title="LinkRest Guide"><link rel="up" href="protocol.html" title="Part&nbsp;II.&nbsp;LinkRest Protocol"><link rel="prev" href="protocol-datetime.html" title="Chapter&nbsp;7.&nbsp;Dates and Times"><link rel="next" href="protocol-extensions.html" title="Chapter&nbsp;9.&nbsp;Protocol Extensions"><script xmlns:d="http://docbook.org/ns/docbook" type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-67243676-1', 'auto');
  ga('send', 'pageview');
        </script></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div xmlns:d="http://docbook.org/ns/docbook" class="navheader"><table width="100%" summary="Navigation header"><tr><th class="versioninfo">v.1 (1.19-SNAPSHOT)</th><th align="center">Chapter&nbsp;8.&nbsp;Control Parameters</th><th></th></tr><tr><td width="20%" align="left"><a accesskey="p" href="protocol-datetime.html">Prev</a>&nbsp;</td><th width="60%" align="center"><a accesskey="u" href="protocol.html">Part&nbsp;II.&nbsp;LinkRest Protocol</a></th><td width="20%" align="right">&nbsp;<a accesskey="n" href="protocol-extensions.html">Next</a></td></tr></table><hr></div><div class="chapter" title="Chapter&nbsp;8.&nbsp;Control Parameters"><div class="titlepage"><div><div><h2 class="title"><a name="protocol-control-parameters"></a>Chapter&nbsp;8.&nbsp;Control Parameters</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="protocol-control-parameters.html#protocol-cayenneExp">Filtering Collection with <code class="code">cayenneExp</code></a></span></dt><dt><span class="section"><a href="protocol-control-parameters.html#protocol-sort-dir">Ordering Collection with <code class="code">sort</code> / <code class="code">dir</code></a></span></dt><dt><span class="section"><a href="protocol-control-parameters.html#protocol-start-limit">Pagination with <code class="code">start</code> / <code class="code">limit</code></a></span></dt><dt><span class="section"><a href="protocol-control-parameters.html#protocol-include-exclude">Shaping Collection Entities with <code class="code">include</code> /
            <code class="code">exclude</code></a></span></dt></dl></div><p>Control parameters, usually passed as URL keys, apply to the Collection Document and let
         the server to provide a single generic endpoint per entity, while still allowing the client
         to shape up the response Collection to its liking. These parameters are normally used with
         GET, however POST/PUT can also return a Collection Document, so many of the parameters are
         also applicable when modifying the data.</p><div class="section" title="Filtering Collection with cayenneExp"><div class="titlepage"><div><div><h2 class="title"><a name="protocol-cayenneExp"></a>Filtering Collection with <code class="code">cayenneExp</code></h2></div></div></div><p>A conditional expression that is used to filter the response objects. Expression
            String should follow the <a class="link" href="http://cayenne.apache.org/docs/4.0/cayenne-guide/expressions.html" target="_top">format
               understood by Cayenne</a> (hence the name - "cayenneExp"). The root for the
            property paths is the request entity (unless "cayenneExp" is used within a relationship
            "include", in which case the root is that related entity). </p><p>Example 1: Filtering on a single property.</p><p><code class="code">cayenneExp=vhost='linkrest.org'&#8232;</code></p><p>Example 2: Filtering using outer join (the "+" sign is Cayenne notation for
            outer).</p><p><code class="code">cayenneExp=articles+ = null</code></p><p>Example 3: Filtering with parameters using positional bindings.</p><p><code class="code">cayenneExp=["articles.body like $b","%LinkRest%"]</code></p><p>Example 4: Filtering with parameters using named bindings.</p><p><code class="code">cayenneExp={ "exp" : "articles.body like $b", "params":
               {"b":"%LinkRest%"}}</code></p></div><div class="section" title="Ordering Collection with sort / dir"><div class="titlepage"><div><div><h2 class="title"><a name="protocol-sort-dir"></a>Ordering Collection with <code class="code">sort</code> / <code class="code">dir</code></h2></div></div></div><p>Example 1: Sort on a single property.</p><p><code class="code">sort=vhost&#8232;</code></p><p>Example 2: Sort descending on a property.</p><p><code class="code">sort=id&amp;dir=DESC&#8232;</code></p><p>Example 3: Same as 2, but sort is a JSON object.</p><p><code class="code">sort={"property":"vhost","direction":"DESC"}&#8232;</code></p><p>Example 4: Multiple sortings as a single JSON structure.</p><p><code class="code">sort=[{"property":"name"},&#8232;"property":"vhost","direction":"DESC"}]&#8232;
            </code></p></div><div class="section" title="Pagination with start / limit"><div class="titlepage"><div><div><h2 class="title"><a name="protocol-start-limit"></a>Pagination with <code class="code">start</code> / <code class="code">limit</code></h2></div></div></div><p>These two parameters are used together to request from the server a range of objects
            for a potentially huge collection. They allow to implement efficient data pagination on
            the client.</p><p><code class="code">"start"</code> is an offset within the "data" array. All the objects below this
            offset are discarded from the collection. Default "start" is 0. </p><p><code class="code">"limit"</code> is a maximum number of objects in the collection "data". Default
            is infinity (no limit). </p><p>"limit" is applied after "start". So for a collection with a total of 10 objects,
               <code class="code">?start=2&amp;limit=5</code> would result in objects 2..6 returned from the
            server. Returned Collection "total" would still be 10.</p></div><div class="section" title="Shaping Collection Entities with include / exclude"><div class="titlepage"><div><div><h2 class="title"><a name="protocol-include-exclude"></a>Shaping Collection Entities with <code class="code">include</code> /
            <code class="code">exclude</code></h2></div></div></div><p>Model entities may have "simple" properties (attributes) and properties that point to
            related entities (relationships). By default Collection Document contains entity
            representation that includes its "id", all of its attributes, and none of the
            relationships. "include" and "exclude" parameters allow the client to request a specific
            subset of entity properties, including related entities. Some examples are given below,
            showing include/exclude parameters and resulting entity contents.</p><p>Example 1: Include default properties (all entity attributes) minus "vhost"
            attribute. </p><p><code class="code">exclude=vhost</code></p><pre class="programlisting">{ "id" : 45, "name" : "LinkRest Site" } </pre><p>Example 2: Exclude all properties, but "id".</p><p></p><p><code class="code">include=id</code></p><pre class="programlisting">{ "id" : 45 } </pre><p>Example 3: Multiple includes, one of them points to attributes of related
            entity.</p><p><code class="code">include=id&amp;include=articles.title&#8232;</code></p><pre class="programlisting">{
   "id" : 45,
   "articles" : [
      { "title" : "LinkRest Includes" }, 
      { "title" : "Other Tech News" },
      { "title" : "Introducing LinkRest" }
   ]
}</pre><p>Example 4: Advanced include. Include specification can itself be a JSON object and
            contain "cayenneExp" and "sort" directives shaping up a collection of related objects
            for each root object.</p><p><code class="code">include={"path":"articles","cayenneExp":"title like
            '%LinkRest%'","sort":"title"}&#8232;&amp;include=articles.title&#8232;</code></p><pre class="programlisting">{
   "id":45,
   "articles" : [
      { "title" : "Introducing LinkRest" },
      { "title" : "LinkRest Includes" }
   ]
}</pre><p>Example 5: Related objects as a map. Here we'll map article bodies by title.</p><p><code class="code">include={"path":"articles","mapBy":"title"}&amp;include=articles.body</code>&#8232;</p><pre class="programlisting">{
   "articles" : {&#8232;  
      "Introducing LinkRest" : { "body" : "LinkRest is a .." },&#8232;  
      "LinkRest Includes" : { "body" : "Includes are .." }&#8232;  
   }
}</pre></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="protocol-datetime.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="protocol.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="protocol-extensions.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter&nbsp;7.&nbsp;Dates and Times&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Chapter&nbsp;9.&nbsp;Protocol Extensions</td></tr></table></div></body></html>